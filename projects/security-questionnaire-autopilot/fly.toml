app = "auto-company-sq-autopilot"
primary_region = "iad"

[build]
  dockerfile = "Dockerfile"

[env]
  PORT = "3000"

[http_service]
  internal_port = 3000
  force_https = true
  auto_start_machines = true
  # Keep at least one machine running so sequential workflow calls hit a warm
  # instance with the mounted volume (runs/ persistence evidence).
  auto_stop_machines = false
  min_machines_running = 1
  processes = ["app"]

[[mounts]]
  source = "runs"
  destination = "/app/runs"

[deploy]
  # Single-machine + volume: avoid rolling creating a second machine that can't
  # mount the same volume.
  strategy = "immediate"

